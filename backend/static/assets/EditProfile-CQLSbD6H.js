import{r as o,u as f,a as p,j as e}from"./index-C1ZVwG5l.js";import{c as x,a as b}from"./customAxios-D_Yu-ABU.js";/* empty css                    */import{L as g}from"./Loader-CIWExXpp.js";import"./index-ngrFHoWO.js";function C(){const[t,i]=o.useState({first_name:"",last_name:"",email:"",phone_number:""}),[m,r]=o.useState(null),[u,d]=o.useState(!0),{user:c}=f(),l=p();o.useEffect(()=>{c&&(async()=>{try{const{data:a}=await x.get("/dashboard");i({first_name:a.first_name,last_name:a.last_name,email:a.email,phone_number:a.phone_number})}catch(a){console.error("Error fetching user data:",a),r("Failed to load user data. Please try again later.")}finally{d(!1)}})()},[c]);const n=s=>{i({...t,[s.target.name]:s.target.value})},h=async s=>{s.preventDefault(),r(null);try{await b.put("/profile",t),l("/dashboard")}catch(a){a.response&&a.response.status>=500?(r("Server error. Please try again later."),setTimeout(()=>l("/dashboard"),3e3)):r(a.response?.data?.detail||"An error occurred. Please try again.")}};return u?e.jsx("div",{style:{margin:"auto 0"},children:e.jsx(g,{})}):e.jsxs("div",{className:"service-form-container",style:{position:"relative"},children:[e.jsx("h2",{children:"Edit Profile"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first_name",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:t.first_name,onChange:n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:t.last_name,onChange:n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:n,style:{background:"#222",color:"#fff"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone_number",children:"Phone Number"}),e.jsx("input",{type:"text",id:"phone_number",name:"phone_number",value:t.phone_number,onChange:n})]}),m&&e.jsx("p",{className:"error-message",children:m}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l(-1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn",children:"Save Changes"})]})]})]})}export{C as default};
