import{c as A,r as S,u as E,a as k,j as s,L as C}from"./index-AoGoU4kM.js";import{c as w}from"./customAxios-D_Yu-ABU.js";import{L}from"./Loader-DfnFbPMN.js";import"./index-ngrFHoWO.js";function z(){const e=A.c(23);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[0]=d):d=e[0];const[m,y]=S.useState(d),{user:i,toast:r}=E(),c=i&&i.is_admin,n=k();let u;e[1]!==r?(u=()=>{(async()=>{try{const{data:t}=await w.get("/services/");Array.isArray(t)?y(t):y([])}catch(t){const p=t;console.error("Error fetching services:",p),r.error(p.message)}})()},e[1]=r,e[2]=u):u=e[2];let f;e[3]!==n||e[4]!==r?(f=[r,n],e[3]=n,e[4]=r,e[5]=f):f=e[5],S.useEffect(u,f);let h;e[6]!==r||e[7]!==i?(h=async t=>{if(!i||!i.is_admin){r.error("You are not authorized to delete this service.");return}if(window.confirm("Are you sure you want to delete this service?"))try{await w.delete(`/services/${t}`),r.success("Service deleted successfully!"),y(g=>g.filter(N=>N.id!==t))}catch(g){console.error("Error deleting service:",g),r.error("Failed to delete service. Please try again.")}},e[6]=r,e[7]=i,e[8]=h):h=e[8];const b=h;let v;e[9]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsxs("div",{className:"services-hero",children:[s.jsx("h2",{children:"Our Services"}),s.jsx("p",{children:"We offer you tailored interior design services that blend aesthetics and function."})]}),e[9]=v):v=e[9];let a;e[10]!==c?(a=c&&s.jsx("div",{className:"add-service-button-container",children:s.jsx(C,{to:"/services/add",children:s.jsx("button",{className:"btn add-new-service-btn",children:"Add New Service"})})}),e[10]=c,e[11]=a):a=e[11];let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x={position:"relative"},e[12]=x):x=e[12];let o;e[13]!==b||e[14]!==c||e[15]!==n||e[16]!==m?(o=m?.length===0?s.jsx(L,{}):m?.map(t=>s.jsxs("div",{className:"service-card",style:{backgroundImage:`url(${t.img_url})`},children:[s.jsx("h3",{children:t.title}),s.jsx("p",{children:t.description}),c&&s.jsxs("div",{className:"service-actions",children:[s.jsx("button",{className:"btn edit-service-btn",onClick:()=>n(`/services/edit/${t.id}`),children:"Edit"}),s.jsx("button",{className:"btn delete-service-btn",onClick:()=>b(t.id),children:"Delete"})]})]},t.id)),e[13]=b,e[14]=c,e[15]=n,e[16]=m,e[17]=o):o=e[17];let l;e[18]!==o?(l=s.jsx("div",{className:"services-cards",style:x,children:o}),e[18]=o,e[19]=l):l=e[19];let j;return e[20]!==a||e[21]!==l?(j=s.jsxs("section",{className:"services-section",children:[v,a,l]}),e[20]=a,e[21]=l,e[22]=j):j=e[22],j}export{z as default};
