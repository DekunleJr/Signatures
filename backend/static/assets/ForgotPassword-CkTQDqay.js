import{c as q,r as o,a as L,j as s,L as $}from"./index-C1ZVwG5l.js";import{c as _}from"./customAxios-D_Yu-ABU.js";import"./index-ngrFHoWO.js";function G(){const e=q.c(28),[r,O]=o.useState(""),[n,E]=o.useState(""),[a,F]=o.useState(""),[l,T]=o.useState(""),[w,u]=o.useState(""),[f,g]=o.useState(""),[p,R]=o.useState(!1),S=L();let x;e[0]!==r?(x=async t=>{t.preventDefault(),u(""),g("");try{await _.post("https://www.2125signature.com/api/forgot-password",{email:r}),g("OTP sent to your email address."),R(!0)}catch(h){console.error("Error sending OTP:",h),u("Failed to send OTP. Please check the email address and try again.")}},e[0]=r,e[1]=x):x=e[1];const C=x;let P;e[2]!==l||e[3]!==r||e[4]!==S||e[5]!==a||e[6]!==n?(P=async t=>{if(t.preventDefault(),u(""),g(""),a!==l){u("Passwords do not match!");return}try{await _.post("https://www.2125signature.com/api/reset-password",{email:r,otp:n,new_password:a}),g("Password has been reset successfully! Redirecting to login..."),setTimeout(()=>{S("/login")},2e3)}catch(h){console.error("Error resetting password:",h),u("Failed to reset password. The OTP may be incorrect or expired.")}},e[2]=l,e[3]=r,e[4]=S,e[5]=a,e[6]=n,e[7]=P):P=e[7];const N=p?P:C;let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("h2",{children:"Reset Password"}),e[8]=j):j=e[8];let i;e[9]!==w?(i=w&&s.jsx("p",{className:"error-message",children:w}),e[9]=w,e[10]=i):i=e[10];let c;e[11]!==f?(c=f&&s.jsx("p",{className:"success-message",children:f}),e[11]=f,e[12]=c):c=e[12];let d;e[13]!==l||e[14]!==r||e[15]!==a||e[16]!==n||e[17]!==p?(d=p?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"otp",children:"OTP"}),s.jsx("input",{type:"text",id:"otp",value:n,onChange:t=>E(t.target.value),required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"newPassword",children:"New Password"}),s.jsx("input",{type:"password",id:"newPassword",value:a,onChange:t=>F(t.target.value),required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx("input",{type:"password",id:"confirmPassword",value:l,onChange:t=>T(t.target.value),required:!0})]})]}):s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"Email"}),s.jsx("input",{type:"email",id:"email",value:r,onChange:t=>O(t.target.value),required:!0})]}),e[13]=l,e[14]=r,e[15]=a,e[16]=n,e[17]=p,e[18]=d):d=e[18];const b=p?"Reset Password":"Send OTP";let m;e[19]!==b?(m=s.jsx("button",{type:"submit",className:"btn-primary",children:b}),e[19]=b,e[20]=m):m=e[20];let v;e[21]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("p",{className:"signup-link-container",children:s.jsx($,{to:"/login",children:"Back to Login"})}),e[21]=v):v=e[21];let y;return e[22]!==N||e[23]!==i||e[24]!==c||e[25]!==d||e[26]!==m?(y=s.jsx("div",{className:"login-container",children:s.jsxs("form",{className:"login-form",onSubmit:N,children:[j,i,c,d,m,v]})}),e[22]=N,e[23]=i,e[24]=c,e[25]=d,e[26]=m,e[27]=y):y=e[27],y}export{G as default};
