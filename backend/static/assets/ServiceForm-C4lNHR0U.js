import{d as A,a as E,r as a,u as M,j as e}from"./index-CiXFLfrc.js";/* empty css                    */import{c as F,a as S}from"./customAxios-D_Yu-ABU.js";import{L as D}from"./Loader-DX-fbhJX.js";import"./index-ngrFHoWO.js";function P(){const{service_id:i}=A(),d=E(),[u,m]=a.useState(""),{toast:n}=M(),[p,g]=a.useState(""),[x,y]=a.useState(null),[h,b]=a.useState(""),[l,c]=a.useState(!1),[v,o]=a.useState(null),[f,j]=a.useState(null),t=!!i;a.useEffect(()=>{t&&(async()=>{c(!0);try{const{data:s}=await F.get(`/services/${i}`);m(s.title),g(s.description),b(s.img_url)}catch(s){o(s.message),n.error(s.message)}finally{c(!1)}})()},[i,t,n]);const N=r=>{y(r.target.files[0])},I=async r=>{r.preventDefault(),c(!0),o(null),j(null);const s=new FormData;s.append("title",u),s.append("description",p),x&&s.append("img_url",x);try{await(t?S.put(`/services/${i}`,s):S.post("/services/",s)),j(`Service ${t?"updated":"added"} successfully!`),n.success(`Service ${t?"updated":"added"} successfully!`),setTimeout(()=>{d("/services")},1500)}catch(C){console.error("Submission error:",C),o("An unexpected error occurred. Please try again."),n.error("An unexpected error occurred. Please try again.")}finally{c(!1)}};return e.jsxs("div",{className:"service-form-container",style:{position:"relative"},children:[e.jsx("h1",{children:t?"Edit Service":"Add New Service"}),l&&e.jsx(D,{}),v&&e.jsx("p",{className:"error-message",children:v}),f&&e.jsx("p",{className:"success-message",children:f}),e.jsxs("form",{onSubmit:I,className:"service-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:u,onChange:r=>m(r.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:p,onChange:r=>g(r.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"mainImage",children:"Main Image"}),e.jsx("input",{type:"file",id:"mainImage",onChange:N,required:!t,style:{padding:".5rem"}}),t&&h&&e.jsxs("div",{children:[e.jsx("p",{children:"Current main image:"}),e.jsx("img",{src:h,alt:"Current Service Main Image",className:"current-main-image-thumbnail"})]})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>d(-1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-service",disabled:l,children:l?"Submitting...":t?"Update Service":"Add Service"})]})]})]})}export{P as default};
