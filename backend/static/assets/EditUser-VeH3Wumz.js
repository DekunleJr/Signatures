import{d as _,a as b,u as j,r as u,j as e}from"./index-CCXG2qkA.js";import{c as v,a as y}from"./customAxios-IDBWETTn.js";/* empty css                  */import"./index-ngrFHoWO.js";function C(){const{userId:c}=_(),i=b(),{user:t,toast:n}=j(),[s,p]=u.useState({first_name:"",last_name:"",email:"",phone_number:""}),[d,m]=u.useState(!0),[f,h]=u.useState(null);u.useEffect(()=>{if(!t||!t.is_admin){n.error("You are not authorized to view this page."),i("/");return}(async()=>{m(!0);try{const{data:a}=await v.get(`/admin/${c}`);p({first_name:a.first_name,last_name:a.last_name,email:a.email,phone_number:a.phone_number||""})}catch(a){console.error("Error fetching user details:",a),h(a.message),n.error(`Failed to fetch user details: ${a.message}`)}finally{m(!1)}})()},[c,t,i,n]);const o=l=>{const{name:a,value:r}=l.target;p(g=>({...g,[a]:r}))},x=async l=>{l.preventDefault(),m(!0),h(null);const a=new FormData;for(const r in s)s[r]&&a.append(r,s[r]);try{await y.put(`/admin/${c}`,a),n.success("User updated successfully!"),i("/admin")}catch(r){console.error("Error updating user:",r),h(r.message),n.error(`Failed to update user: ${r.message}`)}finally{m(!1)}};return d?e.jsx("div",{className:"admin-page-container",children:"Loading user details..."}):f?e.jsxs("div",{className:"admin-page-container error-message",children:["Error: ",f]}):!t||!t.is_admin?null:e.jsxs("div",{className:"admin-page-container",children:[e.jsxs("h1",{children:["Edit User: ",s.first_name," ",s.last_name]}),e.jsxs("form",{onSubmit:x,className:"user-edit-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first_name",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:s.first_name,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:s.last_name,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:o,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone_number",children:"Phone Number"}),e.jsx("input",{type:"text",id:"phone_number",name:"phone_number",value:s.phone_number,onChange:o})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i("/admin"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Updating...":"Update User"})]})]})]})}export{C as default};
