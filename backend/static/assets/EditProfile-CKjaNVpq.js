import{r as o,u as f,a as p,j as e}from"./index-CdOUHszh.js";import{c as x,a as g}from"./customAxios-D_Yu-ABU.js";import{L as _}from"./Loader-BZW7i5RU.js";import"./index-ngrFHoWO.js";function N(){const[r,l]=o.useState({first_name:"",last_name:"",email:"",phone_number:""}),[i,s]=o.useState(null),[c,d]=o.useState(!0),{user:m}=f(),u=p();o.useEffect(()=>{m&&(async()=>{try{const{data:a}=await x.get("/dashboard");l({first_name:a.first_name,last_name:a.last_name,email:a.email,phone_number:a.phone_number})}catch(a){console.error("Error fetching user data:",a),s("Failed to load user data. Please try again later.")}finally{d(!1)}})()},[m]);const n=t=>{l({...r,[t.target.name]:t.target.value})},h=async t=>{t.preventDefault(),s(null);try{await g.put("/profile",r),u("/dashboard")}catch(a){a.response&&a.response.status>=500?(s("Server error. Please try again later."),setTimeout(()=>u("/dashboard"),3e3)):s(a.response?.data?.detail||"An error occurred. Please try again.")}};return c?e.jsx("p",{style:{margin:"auto 0"},children:e.jsx(_,{})}):e.jsxs("div",{className:"service-form-container",style:{position:"relative"},children:[e.jsx("h2",{children:"Edit Profile"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first_name",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:r.first_name,onChange:n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:r.last_name,onChange:n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:n,style:{background:"#222",color:"#fff"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone_number",children:"Phone Number"}),e.jsx("input",{type:"text",id:"phone_number",name:"phone_number",value:r.phone_number,onChange:n})]}),i&&e.jsx("p",{className:"error-message",children:i}),e.jsx("button",{type:"submit",className:"btn",children:"Save Changes"})]})]})}export{N as default};
