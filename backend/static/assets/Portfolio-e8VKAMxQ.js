import{c as K,r as d,u as Q,j as t,L as O}from"./index-duV4Qe54.js";import{c as T}from"./customAxios-D_Yu-ABU.js";import{L as U}from"./Loader-CaWW9ePG.js";import"./index-ngrFHoWO.js";const F=12;function se(){const e=K.c(44);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[0]=b):b=e[0];const[y,G]=d.useState(b),[l,V]=d.useState(1),[k,q]=d.useState(0);let _;e[1]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[1]=_):_=e[1];const[M,B]=d.useState(_),[i,H]=d.useState(""),{user:r}=Q(),z=r&&r.is_admin;let j;e[2]!==r?(j=async(s,o)=>{if(r)try{let a;o?a=await T.delete(`/like/${s}`):a=await T.post(`/like/${s}`),G(c=>c.map(I=>I.id===s?{...I,liked_by_user:!o}:I)),console.log(a.data.message)}catch(a){console.error("Error toggling like:",a)}},e[2]=r,e[3]=j):j=e[3];const D=j;let w,C;e[4]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{(async()=>{try{const{data:o}=await T.get("/portfolio/categories");B(o)}catch(o){console.error("Error fetching categories:",o)}})()},C=[],e[4]=w,e[5]=C):(w=e[4],C=e[5]),d.useEffect(w,C);let v;e[6]!==l||e[7]!==i?(v=()=>{(async()=>{try{const o=(l-1)*F;let a=`/portfolio/?skip=${o}&limit=${F}`;i&&(a=`/portfolio/search/${i}?skip=${o}&limit=${F}`);const{data:c}=await T.get(a);Array.isArray(c.works)?G(c.works):G([]),typeof c.total_works=="number"?q(c.total_works):q(0)}catch(o){console.error("Error fetching portfolio:",o)}})()},e[6]=l,e[7]=i,e[8]=v):v=e[8];let N;e[9]!==l||e[10]!==i||e[11]!==r?(N=[r,l,i],e[9]=l,e[10]=i,e[11]=r,e[12]=N):N=e[12],d.useEffect(v,N);const n=Math.ceil(k/F);let S;e[13]!==n?(S=s=>{s>0&&s<=n&&V(s)},e[13]=n,e[14]=S):S=e[14];const p=S;let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=s=>{H(s.target.value),V(1)},e[15]=E):E=e[15];const J=E;let $,A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("h2",{children:"Our Work"}),$=t.jsx("p",{className:"intro",children:"Explore some of our recent interior decoration projects, each designed with precision, creativity, and elegance."}),e[16]=$,e[17]=A):($=e[16],A=e[17]);let f;e[18]!==z?(f=z&&t.jsxs("div",{className:"add-work-button-container",children:[t.jsx(O,{to:"/portfolio/add",children:t.jsx("button",{className:"btn add-new-work-btn",children:"Add New Work"})}),t.jsx(O,{to:"/category",children:t.jsx("button",{className:"btn add-new-work-btn",children:"Create Category"})})]}),e[18]=z,e[19]=f):f=e[19];let P;e[20]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("label",{htmlFor:"category-filter",children:"Filter by Category:"}),e[20]=P):P=e[20];let W;e[21]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("option",{value:"",children:"All"}),e[21]=W):W=e[21];let m;e[22]!==M?(m=M.map(X),e[22]=M,e[23]=m):m=e[23];let h;e[24]!==i||e[25]!==m?(h=t.jsxs("div",{className:"filter-container",children:[P,t.jsxs("select",{id:"category-filter",onChange:J,value:i,children:[W,m]})]}),e[24]=i,e[25]=m,e[26]=h):h=e[26];let L;e[27]===Symbol.for("react.memo_cache_sentinel")?(L={position:"relative"},e[27]=L):L=e[27];let u;e[28]!==D||e[29]!==y||e[30]!==k||e[31]!==r?(u=y.length===0&&k===0?t.jsx(U,{}):y.length===0?t.jsx("p",{children:"No projects found."}):y.map(s=>t.jsxs("div",{className:"portfolio-item",style:{backgroundImage:`url(${s.img_url})`},children:[t.jsx("h3",{children:s.title}),t.jsx("p",{children:s.description}),t.jsxs("div",{className:"portfolio-actions",style:{display:"flex",alignItems:"center",width:"100%"},children:[t.jsxs("div",{style:{flexGrow:1,textAlign:"center"},children:[" ",t.jsx(O,{to:`/portfolio/${s.id}`,children:t.jsx("button",{className:"btn view-details-btn",children:"View Details"})})]}),r&&t.jsx("span",{className:`like-icon ${s.liked_by_user?"liked":""}`,onClick:()=>D(s.id,s.liked_by_user),style:{cursor:"pointer",fontSize:"1.8em",marginLeft:"auto"},children:s.liked_by_user?"❤️":"♡"})]})]},s.id)),e[28]=D,e[29]=y,e[30]=k,e[31]=r,e[32]=u):u=e[32];let g;e[33]!==u?(g=t.jsx("div",{className:"portfolio-grid",style:L,children:u}),e[33]=u,e[34]=g):g=e[34];let x;e[35]!==l||e[36]!==p||e[37]!==n?(x=n>1&&t.jsxs("div",{className:"pagination-controls",children:[t.jsx("button",{className:"btn",onClick:()=>p(l-1),disabled:l===1,children:"Previous"}),[...Array(n)].map((s,o)=>t.jsx("button",{className:`btn ${l===o+1?"active":""}`,onClick:()=>p(o+1),children:o+1},o+1)),t.jsx("button",{className:"btn",onClick:()=>p(l+1),disabled:l===n,children:"Next"})]}),e[35]=l,e[36]=p,e[37]=n,e[38]=x):x=e[38];let R;return e[39]!==f||e[40]!==h||e[41]!==g||e[42]!==x?(R=t.jsxs("section",{className:"page portfolio",children:[A,$,f,h,g,x]}),e[39]=f,e[40]=h,e[41]=g,e[42]=x,e[43]=R):R=e[43],R}function X(e){return t.jsx("option",{value:e.id,children:e.title},e.id)}export{se as default};
