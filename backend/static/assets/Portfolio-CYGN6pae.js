import{c as T,r as P,u as R,j as s,L as W}from"./index-Cq_IURIl.js";import{c as $}from"./customAxios-D_Yu-ABU.js";import{L as D}from"./Loader-B5295aBC.js";import"./index-ngrFHoWO.js";const S=12;function V(){const e=T.c(30);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0];const[m,_]=P.useState(u),[l,L]=P.useState(1),[g,C]=P.useState(0),{user:r}=R(),A=r&&r.is_admin;let p;e[1]!==r?(p=async(t,o)=>{if(r)try{let h;o?h=await $.delete(`/like/${t}`):h=await $.post(`/like/${t}`),_(I=>I.map(E=>E.id===t?{...E,liked_by_user:!o}:E)),console.log(h.data.message)}catch(h){console.error("Error toggling like:",h)}},e[1]=r,e[2]=p):p=e[2];const v=p;let k;e[3]!==l?(k=()=>{(async()=>{try{const t=(l-1)*S,{data:o}=await $.get(`/portfolio/?skip=${t}&limit=${S}`);console.log("API Response Data:",o),Array.isArray(o.works)?(console.log("Projects from API:",o.works),_(o.works)):(console.log("Projects from API: Not an array, setting to empty array."),_([])),typeof o.total_works=="number"?(console.log("Total Works from API:",o.total_works),C(o.total_works)):(console.log("Total Works from API: Not a number, setting to 0."),C(0))}catch(t){console.error("Error fetching portfolio:",t)}})()},e[3]=l,e[4]=k):k=e[4];let x;e[5]!==l||e[6]!==r?(x=[r,l],e[5]=l,e[6]=r,e[7]=x):x=e[7],P.useEffect(k,x);const i=Math.ceil(g/S);let y;e[8]!==i?(y=t=>{t>0&&t<=i&&L(t)},e[8]=i,e[9]=y):y=e[9];const f=y;let b,j;e[10]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("h2",{children:"Our Work"}),j=s.jsx("p",{className:"intro",children:"Explore some of our recent interior decoration projects, each designed with precision, creativity, and elegance."}),e[10]=b,e[11]=j):(b=e[10],j=e[11]);let n;e[12]!==A?(n=A&&s.jsx("div",{className:"add-work-button-container",children:s.jsx(W,{to:"/portfolio/add",children:s.jsx("button",{className:"btn add-new-work-btn",children:"Add New Work"})})}),e[12]=A,e[13]=n):n=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w={position:"relative"},e[14]=w):w=e[14];let a;e[15]!==v||e[16]!==m||e[17]!==g||e[18]!==r?(a=m.length===0&&g===0?s.jsx(D,{}):m.length===0?s.jsx("p",{children:"No projects found."}):m.map(t=>s.jsxs("div",{className:"portfolio-item",style:{backgroundImage:`url(${t.img_url})`},children:[s.jsx("h3",{children:t.title}),s.jsx("p",{children:t.description}),s.jsxs("div",{className:"portfolio-actions",style:{display:"flex",alignItems:"center",width:"100%"},children:[s.jsxs("div",{style:{flexGrow:1,textAlign:"center"},children:[" ",s.jsx(W,{to:`/portfolio/${t.id}`,children:s.jsx("button",{className:"btn view-details-btn",children:"View Details"})})]}),r&&s.jsx("span",{className:`like-icon ${t.liked_by_user?"liked":""}`,onClick:()=>v(t.id,t.liked_by_user),style:{cursor:"pointer",fontSize:"1.8em",marginLeft:"auto"},children:t.liked_by_user?"❤️":"♡"})]})]},t.id)),e[15]=v,e[16]=m,e[17]=g,e[18]=r,e[19]=a):a=e[19];let c;e[20]!==a?(c=s.jsx("div",{className:"portfolio-grid",style:w,children:a}),e[20]=a,e[21]=c):c=e[21];let d;e[22]!==l||e[23]!==f||e[24]!==i?(d=i>1&&s.jsxs("div",{className:"pagination-controls",children:[s.jsx("button",{className:"btn",onClick:()=>f(l-1),disabled:l===1,children:"Previous"}),[...Array(i)].map((t,o)=>s.jsx("button",{className:`btn ${l===o+1?"active":""}`,onClick:()=>f(o+1),children:o+1},o+1)),s.jsx("button",{className:"btn",onClick:()=>f(l+1),disabled:l===i,children:"Next"})]}),e[22]=l,e[23]=f,e[24]=i,e[25]=d):d=e[25];let N;return e[26]!==c||e[27]!==d||e[28]!==n?(N=s.jsxs("section",{className:"page portfolio",children:[b,j,n,c,d]}),e[26]=c,e[27]=d,e[28]=n,e[29]=N):N=e[29],N}export{V as default};
