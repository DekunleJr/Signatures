import{d as j,a as b,r as a,u as C,j as e}from"./index-C1ZVwG5l.js";import{c as x,a as v}from"./customAxios-D_Yu-ABU.js";import{L as N}from"./Loader-CIWExXpp.js";/* empty css                    */import"./index-ngrFHoWO.js";function $(){const{category_id:r}=j(),u=b(),[i,d]=a.useState(""),{toast:m}=C(),[l,o]=a.useState(!1),[p,n]=a.useState(null),[f,g]=a.useState(null),t=!!r;a.useEffect(()=>{t&&(async()=>{o(!0);try{const{data:s}=await x.get(`/portfolio/category/${r}`);d(s.title)}catch(s){n(s.message)}finally{o(!1)}})()},[r,t]);const h=async c=>{c.preventDefault(),o(!0),n(null),g(null);const s=new FormData;s.append("title",i);try{await(t?v.put(`/portfolio/category/${r}`,s):x.post("/portfolio/categories",null,{params:{title:i}})),g(`Category ${t?"updated":"added"} successfully!`),m.success(`Category ${t?"updated":"added"} successfully!`),setTimeout(()=>{u("/admin")},1500)}catch(y){console.error("Submission error:",y),m.error(y.message),n("An unexpected error occurred. Please try again.")}finally{o(!1)}};return e.jsxs("div",{className:"service-form-container",style:{position:"relative"},children:[e.jsx("h1",{children:t?"Edit Category":"Add New Category"}),l&&e.jsx(N,{}),p&&e.jsx("p",{className:"error-message",children:p}),f&&e.jsx("p",{className:"success-message",children:f}),e.jsxs("form",{onSubmit:h,className:"work-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:i,onChange:c=>d(c.target.value),required:!0})]}),e.jsxs("div",{className:"form-buttons",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>u(-1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-service",disabled:l,children:l?"Submitting...":t?"Update Category":"Add Category"})]})]})]})}export{$ as default};
